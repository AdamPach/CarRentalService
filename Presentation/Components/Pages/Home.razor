@page "/"
@using CarRentalService.UseCases.Persons.Employees

@inject IEmployeeService EmployeeService
@inject ISnackbar Snackbar

<PageTitle>Home</PageTitle>

<h1>Hello</h1>
<h2>Welcome to the Car Rental Service</h2>

<p>For more access please log in</p>

<MudForm>
    <MudTextField 
        Label="Username"
        @bind-Value="@Username" />
    <MudTextField 
        Label="Password" 
        @bind-Value="@Password"
        InputType="@InputType.Password"/>
    
    <MudButton OnClick="LoginTask" Variant="Variant.Filled">Login</MudButton>
</MudForm>

@code{
    
    private string Username { get; set; } = string.Empty;
    
    private string Password { get; set; } = string.Empty;
    
    private async Task LoginTask()
    {
        var loginResult = await EmployeeService.LoginAsync(Username, Password);

        if (loginResult.IsSuccess)
        {
            Snackbar.Add("Login successful", Severity.Success);
        }
        else
        {
            Snackbar.Add("Login failed", Severity.Error);
        }
    }
}